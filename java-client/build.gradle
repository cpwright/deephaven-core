plugins {
  id 'java-library'
  id 'com.diffplug.spotless'
}

dependencies {
  api project(':qst')
  implementation project(':proto:proto-backplane-grpc')

  implementation 'com.google.dagger:dagger:2.31.1'
  annotationProcessor 'com.google.dagger:dagger-compiler:2.31.1'

  annotationProcessor 'org.immutables:value:2.8.1'
  compileOnly 'org.immutables:value-annotations:2.8.1'

  testImplementation(platform('org.junit:junit-bom:5.7.2'))
  testImplementation 'org.junit.jupiter:junit-jupiter'
  testImplementation 'org.assertj:assertj-core:3.19.0'

  // users must provide their own...
  implementation 'org.slf4j:slf4j-api:1.7.30'
  runtimeOnly 'org.slf4j:slf4j-simple:1.7.30' // todo: remove
  //runtimeOnly 'ch.qos.logback:logback-classic:1.2.3' // todo: remove
}

test {
  useJUnitPlatform()
}

spotless {
  java {
    eclipse().configFile("${rootDir}/style/eclipse-java-google-style.xml")
  }
}